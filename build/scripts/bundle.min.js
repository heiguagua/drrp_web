"use strict";var app=angular.module("app",["Config","ui.router","ui.bootstrap","isteven-multi-select","Login","Main","Dashboard","Department","Inventory","InventoryDetail","Department.Inventory","Department.Audit","Department.SystemUser","Department.Requirement","RequirementMain","RequirementDetail","DepartmentShare"]);app.config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$provide",function(t,e,n,a,r){n.html5Mode(!1),a.interceptors.push(["$q",function(t){return{request:function(t){return t.withCredentials=!0,t},requestError:function(t){return response},response:function(t){return t},responseError:function(t){return t}}}]),e.otherwise("/login"),t.state("login",{url:"/login",templateUrl:"views/common/login.html",controller:"Login.Controller.Main"}).state("main",{url:"/main",templateUrl:"views/common/main.html",controller:"Main.Controller.Main"}).state("main.dashboard",{url:"/dashboard",templateUrl:"views/common/dashboard.html",controller:"Dashboard.Controller.Main"}).state("main.inventory",{url:"/inventory",templateUrl:"views/inventory/main.html",controller:"Inventory.Controller.Main"}).state("main.inventory.list",{url:"/list",templateUrl:"views/inventory/list.html",controller:"Inventory.Controller.Main"}).state("main.inventory.detail",{url:"/detail/:inventoryID",templateUrl:"views/inventory/detail.html",controller:"InventoryDetail.Controller.Main"}).state("main.requirement",{url:"/requirement",templateUrl:"views/requirement/main.html",controller:"RequirementMain.Controller.Main"}).state("main.requirement.detail",{url:"/detail/:requirementID",templateUrl:"views/requirement/detail.html",controller:"RequirementDetail.Controller.Main"}).state("main.department",{url:"/department",templateUrl:"views/department/main.html",controller:"Department.Controller.Main"}).state("main.department.inventory",{url:"/inventory",templateUrl:"views/department/inventory.html",controller:"Department.Inventory.Controller.Main"}).state("main.department.inventory.publish",{url:"/publish",templateUrl:"views/department/inventory-publish.html",controller:"Department.Inventory.Controller.publish"}).state("main.department.share",{url:"/share",templateUrl:"views/department/share.html",controller:"DepartmentShare.Controller.Main"}).state("main.department.requirement",{url:"/requirement",templateUrl:"views/department/requirement.html",controller:"Department.Requirement.Controller.Main"}).state("main.department.requirement.publish",{url:"/publish",templateUrl:"views/department/requirement-publish.html"}).state("main.department.requirement.detail",{url:"/detail?ID",templateUrl:"views/department/requirement-detail.html",controller:"Department.Requirement.Controller.detail"}).state("main.department.audit",{url:"/audit",cache:"false",templateUrl:"views/department/audit.html",controller:"Department.Audit.Controller.Main"}).state("main.department.audit.info",{url:"/info?AUDITID",templateUrl:"views/department/audit-info.html",controller:"Department.Audit.Controller.info"}).state("main.department.user",{url:"/user",templateUrl:"views/department/user.html",controller:"Department.SystemUser.Controller.Main"})}]);var Config=angular.module("Config",[]);Config.constant("API",{path:"http://192.168.13.224:8080/drrp/api"});var Dashboard=angular.module("Dashboard",["ui.router"]);Dashboard.controller("Dashboard.Controller.Main",["$scope","Dashboard.Service.Http",function(t,e){e.getInventory({skip:0,limit:6}).then(function(e){200==e.data.head.status&&(t.Inventories=e.data.body)}),e.getRequirement({skip:0,limit:7}).then(function(e){200==e.data.head.status&&(t.Requirements=e.data.body)}),t.QInventoryOverview=e.getInventoryOverview({endTime:0,endTime:10}),t.QRequirementOverview=e.getRequirementOverview({startTime:0,endTime:10}),t.QInventoryStatistic=e.getInventoryStatistic({skip:0,limit:10}),e.getDepartments().then(function(e){200==e.data.head.status&&(t.Bureaus=e.data.body)})}]),Dashboard.factory("Dashboard.Service.Http",["$http","API",function(t,e){function n(e){return t.get(l+"/inventory",{params:e})}function a(e){return t.get(l+"/inventory/overview",{params:e})}function r(e){return t.get(l+"/requirement",{params:e})}function i(e){return t.get(l+"/requirement/overview",{params:e})}function o(e){return t.get(l+"/inventory/statistic",{params:e})}function s(){return t.get(l+"/dep")}var l=e.path;return{getInventory:n,getInventoryOverview:a,getRequirement:r,getRequirementOverview:i,getInventoryStatistic:o,getDepartments:s}}]),Dashboard.directive("wiservInventoryOverviewChart",[function(){return{restrict:"AE",template:"<div style='width:300;height:240px;'></div>",link:function(t,e,n){t.QInventoryOverview.then(function(t){if(200==t.data.head.status){var n=t.data.body[0],a=echarts.init(e.find("div")[0]),r={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"清单提供部门",type:"pie",selectedMode:"single",radius:[0,"30%"],label:{normal:{position:"inner"}},labelLine:{normal:{show:!1}},data:[{value:n.INVENTORY_DEPT_NUM,name:"清单提供部门"},{value:n.MONTH_INVENTORY_DEPT_NUM,name:"本月新增",selected:!0}]},{name:"清单总数",type:"pie",radius:["40%","55%"],data:[{value:n.INVENTORY_NUM,name:"清单总数"},{value:n.INVENTORY_DEPT_NUM,name:"本月新增",selected:!0}]}]};a.setOption(r)}})}}}]),Dashboard.directive("wiservRequirementOverviewChart",[function(){return{restrict:"AE",template:"<div style='width:300;height:240px;'></div>",link:function(t,e,n){t.QRequirementOverview.then(function(t){if(200==t.data.head.status){var n=t.data.body[0],a=echarts.init(e.find("div")[0]),r={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"清单提供部门",type:"pie",selectedMode:"single",radius:[0,"30%"],label:{normal:{position:"inner"}},labelLine:{normal:{show:!1}},data:[{value:n.REQUIREMENT_DEPT_NUM,name:"清单提供部门"},{value:n.MONTH_REQUIREMENT_DEPT_NUM,name:"本月新增",selected:!0}]},{name:"清单总数",type:"pie",radius:["40%","55%"],data:[{value:n.REQUIREMENT_NUM,name:"清单总数"},{value:n.REQUIREMENT_DEPT_NUM,name:"本月新增",selected:!0}]}]};a.setOption(r)}})}}}]),Dashboard.directive("wiservStatisticChart",[function(){return{restrict:"AE",template:"<div style='width:100%;height:240px;'></div>",link:function(t,e,n){t.QInventoryStatistic.then(function(t){var n=t.data.body[0],a=t.data.body[1],r=t.data.body[2],i=echarts.init(e.find("div")[0]),o={tooltip:{trigger:"axis"},legend:{data:["清单","需求"]},xAxis:[{type:"category",name:"数量",data:n.DEPARTMENT}],yAxis:[{type:"value",name:"单位",min:0,max:30,interval:30,axisLabel:{formatter:"{value} 个"}}],series:[{name:"清单",type:"bar",data:a.INVENTORY},{name:"需求",type:"bar",data:r.REQUIREMENT}]};i.setOption(o)})}}}]);var Login=angular.module("Login",["ui.router"]);Login.controller("Login.Controller.Main",["$rootScope","$scope","$state","Login.Service.Http",function(t,e,n,a){e.Login={},e.Login.submit=function(){var r=e.Login.username,i=e.Login.password;a.login({USERNAME:r,PASSWORD:i}).then(function(e){t.User=e.data.body[0],console.log(e.data.body[0]),200==e.data.head.status?n.go("main.dashboard"):n.go("login")})}}]),Login.factory("Login.Service.Http",["$http","API",function(t,e){function n(e){return t.get(a+"/login",{params:e})}var a=e.path;return{login:n}}]);var Main=angular.module("Main",["ui.router"]);Main.controller("Main.Controller.Main",["$scope",function(t){t.Tab={},t.Tab.switcher=function(e){switch(e){case"dashboard":t.Tab.Actived={},t.Tab.Actived.dashboard="active";break;case"inventory":t.Tab.Actived={},t.Tab.Actived.inventory="active";break;case"requirement":t.Tab.Actived={},t.Tab.Actived.requirement="active";break;case"department":t.Tab.Actived={},t.Tab.Actived.department="active"}},t.Tab.active="active"}]);var Audit=angular.module("Department.Audit",["ui.router"]);Audit.controller("Department.Audit.Controller.Main",["$rootScope","$scope","$q","Department.Audit.Service.Http",function(t,e,n,a){function r(t){a.getAuditList(t).then(function(t){e.auditList=t.data.body})}var i={};console.log(t.User),r(i),a.getAuditTotal().then(function(t){e.auditTotal=t.data.body[0].INVENTORY_NUM}),a.getShareLevelFilter().then(function(t){e.shareLevelList=t.data.body}),a.getSpatialFilter().then(function(t){e.areaPeriodList=t.data.body}),a.getAuditStatusFilter().then(function(t){e.auditStatusList=t.data.body}),e.shareLvSelection=[],e.getAuListBySl=function(t){var n=e.shareLvSelection.indexOf(t.SYS_DICT_ID);n>-1?e.shareLvSelection=[]:e.shareLvSelection=t.SYS_DICT_ID,i.SHARE_LEVEL=e.shareLvSelection,i.limit=10,i.skip=0,r(i)},e.areaSelection=[],e.getAuListByAP=function(t){var n=e.areaSelection.indexOf(t.SYS_DICT_ID);n>-1?e.areaSelection.splice(n,1):e.areaSelection.push(t.SYS_DICT_ID),console.log(e.areaSelection),i.AREA_DATA_LEVEL=e.areaSelection,i.limit=10,i.skip=0,r(i)},e.statusSelection=[],e.getAuListBySta=function(t){var n=e.statusSelection.indexOf(t.AUDITNAME);n>-1?e.statusSelection=[]:e.statusSelection=t.AUDITNAME,i.AUDIT_STATUS=t.AUDIT_STATUS,i.limit=10,i.skip=0,r(i)},e.getShareLevelAll=function(){e.shareLvSelection=[],i.SHARE_LEVEL=null,i.limit=10,i.skip=0,r(i)},e.getSpatialAll=function(){e.areaSelection=[],i.AREA_DATA_LEVEL=null,i.limit=10,i.skip=0,r(i)},e.getStatusAll=function(){e.statusSelection=[],i.AUDIT_STATUS=null,i.limit=10,i.skip=0,r(i)}}]),Audit.controller("Department.Audit.Controller.info",["$rootScope","$scope","$state","$q","Department.Audit.Service.Http","$stateParams",function(t,e,n,a,r,i){e.depName=t.User.DEP_NAME;var o=i.AUDITID;r.getAuditDetail({AUDITID:o}).then(function(t){e.AuditDetail=t.data.body[0]}),e.submitAudit=function(){var a=t.User.PERSON_NAME,i=_.assign(e.AuditInfo,{AUDITOR:a},{ID:o});console.log(i),r.updateAuditDetail(i).then(function(t){if(200==t.data.head.status){alert("审核成功");e.auditList.indexOf(o);n.go("main.department.audit",{},{reload:!0})}else alert("审核失败")})}}]),Audit.factory("Department.Audit.Service.Http",["$http","$q","API",function(t,e,n){function a(e){return t.get(d+"/openInventory/countAll",{params:e})}function r(e){return t.get(d+"/openInventory/countByShareLevel",{params:e})}function i(e){return t.get(d+"/openInventory/countBySpatial",{params:e})}function o(e){return t.get(d+"/openInventory/countByAuditStatus",{params:e})}function s(e){return t.get(d+"/openInventory/inventoryList",{params:e})}function l(e){return t.get(d+"/openInventory/openInventoryInfo",{params:e})}function u(e){return t.put(d+"/openInventory/updateAuditStatus",{data:e})}var d=n.path;return{getAuditTotal:a,getShareLevelFilter:r,getSpatialFilter:i,getAuditStatusFilter:o,getAuditList:s,getAuditDetail:l,updateAuditDetail:u}}]);var DInventory=angular.module("Department.Inventory",["ui.router"]);DInventory.controller("Department.Inventory.Controller.Main",["$scope","$q","Department.Inventory.Service.Http",function(t,e,n){function a(e){n.getDepartInvntList(e).then(function(e){t.depIvntList=e.data.body})}var r={};r.limit=10,r.skip=0,a(r),n.getInventoryDepTotal().then(function(e){t.ivntDepTotal=e.data.body[0].INVENTORY_NUM,t.depName=e.data.body[0].DEP_NAME}),n.getShareLevelFilter().then(function(e){t.shareLevelList=e.data.body}),n.getSpatialFilter().then(function(e){t.areaPeriodList=e.data.body}),t.shareLvMainSelection=[],t.getIvntListBySl=function(e){var n=t.shareLvMainSelection.indexOf(e.SYS_DICT_ID);n>-1?t.shareLvMainSelection=[]:t.shareLvMainSelection=e.SYS_DICT_ID,r.SHARE_LEVEL=t.shareLvMainSelection,r.limit=10,r.skip=0,a(r)},t.areaMainSelection=[],t.getIvntListByAP=function(e){var n=t.areaMainSelection.indexOf(e.DICTID);n>-1?t.areaMainSelection.splice(n,1):t.areaMainSelection.push(e.SYS_DICT_ID),console.log(t.areaMainSelection),r.AREA_DATA_LEVEL=t.areaMainSelection,r.limit=10,r.skip=0,a(r)},t.getShareLevelAll=function(){t.shareLvMainSelection=[],r.SHARE_LEVEL=null,r.limit=10,r.skip=0,a(r)},t.getSpatialAll=function(){t.areaMainSelection=[],r.AREA_DATA_LEVEL=null,r.limit=10,r.skip=0,a(r)}}]),DInventory.controller("Department.Inventory.Controller.publish",["$rootScope","$scope","$q","$uibModal","Department.Inventory.Service.Component","Department.Inventory.Service.Http",function(t,e,n,a,r,i){e.step1={},e.step2={},e.step3={},e.step4={},e.step1.show=!0,e.step2.show=!1,e.step3.show=!1,e.step4.show=!1,e.progress=0,e.loginUser=t.User;const o=1,s=2,l=3,u=4,d=6,p=5,c="250375bd-02f0-11e6-a52a-5cf9dd40ad7e";e.inventoryAttrList=[],e.DataExamps=[],e.exampTitles=[],e.submitObject={},Date.prototype.format=function(t){var e={"%m":this.getMonth()+1+"","%d":this.getDate()+"","%H":this.getHours()+"","%M":this.getMinutes()+"","%S":this.getSeconds()+""};/(%Y)/.test(t)&&(t=t.replace(RegExp.$1,this.getFullYear()+"")),/(%y)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(2))),/(%s)/.test(t)&&(t=t.replace(RegExp.$1,(this.getTime()+"").slice(0,10)));for(var n in e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,2==e[n].length?e[n]:"0"+e[n]));return t},e.shareFreqSelection=[],e.dataLevelSelection=[],e.shareFreqArrShow=[],e.toggleShareFreqSelection=function(t,n){var a=e.shareFreqSelection.indexOf(t);a>-1?(e.shareFreqSelection.splice(t,1),e.shareFreqArrShow.splice(n,1)):(e.shareFreqSelection.push(t),e.shareFreqArrShow.push(n))},e.Modal={},e.Modal.Quota={},e.Modal.Quota.dataLevelSelection=[],e.toggleDataLevelSelection=function(t){var n=e.dataLevelSelection.indexOf(t.ID),a=e.Modal.Quota.dataLevelSelection.indexOf(t.DICT_NAME);n>-1?e.dataLevelSelection.splice(n,1):e.dataLevelSelection.push(t.ID),a>-1?e.Modal.Quota.dataLevelSelection.splice(n,1):e.Modal.Quota.dataLevelSelection.push(t.DICT_NAME)},i.getSystemDictByCatagory({DICT_CATEGORY:o}).then(function(t){e.shareFrequencyList=t.data.body}),i.getSystemDictByCatagory({DICT_CATEGORY:s}).then(function(t){e.dataLevelList=t.data.body}),i.getSystemDictByCatagory({DICT_CATEGORY:l}).then(function(t){e.shareLevelList=t.data.body}),i.getDepartmentList().then(function(t){e.deptList=t.data.body,e.deptListModal=t.data.body}),e.depShow=!1,e.depShowModal=!1,e.showHideDeps=function(t){c==e.dataInfo.shareLevel?e.depShow=!0:e.depShow=!1,"授权开放"==e.Modal.Quota.shareLevel?e.depShowModal=!0:e.depShowModal=!1,console.log(e.depShow)},e.backToStep1=function(){e.step1.show=!0,e.step2.show=!1,e.progress=0},e.toStep3=function(){return e.inventoryAttrList&&0!=e.inventoryAttrList.length?(e.step3.show=!0,e.step2.show=!1,e.progress=50,void(e.DataExamps=e.inventoryAttrList)):void alert("请先添加指标属性！")},e.backToStep2=function(){e.step2.show=!0,e.step3.show=!1,e.progress=25},e.toStep4=function(){return e.ExampDatas&&0!=e.ExampDatas.length?(e.step4.show=!0,e.step3.show=!1,void(e.progress=75)):void alert("请先添加示例数据！")},e.backToStep3=function(){e.step3.show=!0,e.step4.show=!1,e.progress=50},e.toStep2=function(n){if(n){e.step2.show=!0,e.step1.show=!1,e.progress=25,e.step1_data={};var a=[],r=_.union(e.shareFreqSelection,e.dataLevelSelection);_(r).forEach(function(t){var n={};n.dataInfoId=e.dataInfo.dataName,n.sysDictId=t,a.push(n)});var i=[];e.dataInfo.shareLevel==c&&(i=_.map(e.outputDeptList,"ID")),0==i.length&&(i="0"),e.dataInfo.publishTime=e.dataInfo.publishTime.format("%Y-%m-%d"),e.dataInfo=_.assign(e.dataInfo,{shareDeps:i},{depId:t.User.DEP_ID}),e.step1_data=_.assign({dataInfo:e.dataInfo},{dataInfoAddConfigs:a}),window.console.log(e.step1_data)}},e.popAttrAddModal=function(){e.Modal={},e.Modal.Quota={},e.Modal.Quota.dataLevelSelection=[],i.getSystemDictByCatagory({DICT_CATEGORY:u}).then(function(t){e.quotaTypeList=t.data.body}),i.getSystemDictByCatagory({DICT_CATEGORY:d}).then(function(t){e.dataShowFormatList=t.data.body}),i.getSystemDictByCatagory({DICT_CATEGORY:p}).then(function(t){e.secretFlagList=t.data.body}),r.popModal(e,"添加","add-indicator-modal").result.then(function(){var t=[];e.Modal.Quota.shareLevel==c&&(t=_.map(e.outputModalDeptList,"ID")),0==t.length&&(t="0");var n="";_.forEach(e.Modal.Quota.dataLevelSelection,function(t){n=n+t+","});var a=_.assign({areaDataLevel:n},{shareDeps:t},{createTime:new Date},e.Modal.Quota);e.inventoryAttrList.push(a),e.step2_data={},e.dataQuota=[],_.forEach(e.inventoryAttrList,function(t,n){t.dataLevelSelection=null;var a=_.assign({dataInfoId:e.dataInfo.dataName},t,{showOrder:n+1});e.dataQuota.push(a)}),e.step2_data.dataQuota=e.dataQuota})},e.ExampDatas=[],e.dataCells=[],e.step3_data={},e.addExampData=function(){e.ExampModal={},e.ExampModal.ExampData={},e.rowDatas=[],r.popModal(e,"添加","add-example-modal").result.then(function(){window.console.log(e.step2_data.dataQuota),_.forEach(e.step2_data.dataQuota,function(t,n){var a=_.assign({rowKey:t.showOrder},{dataQuotaValue:t.dataValue},{dataQuotaId:t.quotaName});e.rowDatas.push(a),e.dataCells.push(a)}),e.ExampDatas.push(e.rowDatas),e.step3_data.dataExamples=e.dataCells})},e.addFormSubmit=function(){e.step4_data={},e.step4_data.dataOtherInfo=_.assign({dataInfoId:e.dataInfo.dataName},e.DataOtherInfo),e.submitObject=_.assign(e.step1_data,e.step2_data,e.step3_data,e.step4_data),console.log(e.submitObject),i.saveInventory(e.submitObject).then(function(t){console.log(t.data.head),200==t.data.head.status&&(e.progress=100,alert("添加成功"))})},e.popup2={opened:!1},e.openDatePicker=function(){e.popup2.opened=!0}}]),DInventory.factory("Department.Inventory.Service.Http",["$http","$q","API",function(t,e,n){function a(e){return t.post(d+"/inventory",{data:e})}function r(e){return t.get(d+"/dict",{params:e})}function i(){return t.get(d+"/dep/")}function o(){return t.get(d+"/inventory/getDepWithInventoryNumByDep")}function s(e){return t.get(d+"/inventory/inventoryListByDep",{params:e})}function l(e){return t.get(d+"/inventory/getShareDictWithInventoryNumByDep",{params:e})}function u(e){return t.get(d+"/inventory/getAreaDictWithInventoryNumByDep",{params:e})}var d=n.path;return{saveInventory:a,getSystemDictByCatagory:r,getDepartmentList:i,getDepartInvntList:s,getShareLevelFilter:l,getSpatialFilter:u,getInventoryDepTotal:o}}]),DInventory.service("Department.Inventory.Service.Component",["$uibModal",function(t){function e(t,e){t.Alerts=[{type:e.type,message:e.message,timeout:1200}],t.CloseAlert=function(e){t.Alerts.splice(e,1)}}function n(e,n,a){e.Modal.type=n;var r=t.open({animation:!0,templateUrl:a+".html",scope:e});return e.Modal.confirm=function(t){t&&r.close(e.Modal)},e.Modal.cancel=function(){r.dismiss()},r}return{popAlert:e,popModal:n}}]);var Department=angular.module("Department",["ui.router"]);Department.controller("Department.Controller.Main",["$scope","$q","Department.Service.Http",function(t,e,n){function a(){var t=new Date;return""+t.getFullYear()+"-"+(t.getMonth()+1)+"-01 00:00:00"}function r(){var t=new Date;return""+t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" 23:59:59"}var i=a(),o=r();n.getInventoryTotal(null).then(function(e){t.inventoryTotal=e.data.body[0].TOTAL}),n.getInventoryTotal({startDate:i,endDate:o}).then(function(e){t.inventoryMonthTotal=e.data.body[0].TOTAL}),n.getShareTotal().then(function(e){t.shareTotal=e.data.body[0].TOTAL}),n.getShareTotal({startDate:i,endDate:o}).then(function(e){t.shareMonthTotal=e.data.body[0].TOTAL}),n.getRequirementTotal().then(function(e){t.requirementTotal=e.data.body[0].TOTAL}),n.getRequirementTotal({startDate:i,endDate:o}).then(function(e){t.requirementMonthTotal=e.data.body[0].TOTAL}),n.getUnauditTotal().then(function(e){t.unauditTotal=e.data.body[0].TOTAL}),n.getInventoryList({skip:0,limit:6}).then(function(e){t.unauditInventoryList=e.data.body}),n.getResponseList({skip:0,limit:6}).then(function(e){t.responseList=e.data.body,t.responseTotal=e.data.head.total})}]),Department.factory("Department.Service.Http",["$http","$q","API",function(t,e,n){function a(e){return t.get(u+"/inventoryTotal/department",{params:e})}function r(e){return t.get(u+"/shareTotal/department",{params:e})}function i(e){return t.get(u+"/requirementTotal/department",{params:e})}function o(){return t.get(u+"/dataAuditInfoTotal/department")}function s(e){return t.get(u+"/inventory/department",{params:e})}function l(e){return t.get(u+"/requirementResponse/department",{params:e})}var u=n.path;return{getInventoryTotal:a,getShareTotal:r,getRequirementTotal:i,getUnauditTotal:o,getInventoryList:s,getResponseList:l}}]);var DepartmentReq=angular.module("Department.Requirement",["ui.router"]);DepartmentReq.controller("Department.Requirement.Controller.Main",["$rootScope","$scope","$stateParams","Department.Inventory.Service.Component","Department.Requirement.Service.Http",function(t,e,n,a,r){function i(){r.getDepartmentRequirementList({skip:0,limit:10}).then(function(t){e.requirementList=t.data.body})}i(),e.publishReq=function(){e.Modal={},e.req={},a.popModal(e,"发布","add-req-modal").result.then(function(){r.publishReq(e.req).then(function(t){200==t.data.head.status?(alert("发布成功"),i()):alert("发布失败")})})},e.updateReq=function(t){e.Modal={},e.req=t,a.popModal(e,"修改","add-req-modal").result.then(function(){r.updateReq({ID:e.req.ID,REQUIREMENT_NAME:e.req.REQUIREMENT_NAME,REQUIREMENT_DESC:e.req.REQUIREMENT_DESC,LINKMAN:e.req.LINKMAN,EMAIL:e.req.EMAIL}).then(function(t){200==t.data.head.status?(alert("修改成功"),i()):alert("修改失败")})})},e.deleteReq=function(t){r.deleteReq(t).then(function(t){200==t.data.head.status?(alert("删除成功"),i()):alert("删除失败")})}}]),DepartmentReq.controller("Department.Requirement.Controller.detail",["$scope","$stateParams","Department.Requirement.Service.Http",function(t,e,n){console.log(e.ID),n.getReqDetail({ID:e.ID}).then(function(e){t.ReqDetail=e.data.body[0]}).then(function(){n.getResponseList({REQUIREMENT_ID:e.ID}).then(function(e){t.responseList=e.data.body})})}]),DepartmentReq.factory("Department.Requirement.Service.Http",["$http","API",function(t,e){function n(e){return t.get(l+"/requirement/getRequirementListByDep",{params:e})}function a(e){return t.post(l+"/requirement",{data:e})}function r(e){return t.put(l+"/requirement/",{data:e})}function i(e){return t["delete"](l+"/requirement/",{data:{ID:e}})}function o(e){return t.get(l+"/requirement/requireDetail",{params:e})}function s(e){return t.get(l+"/requirement/requireResponseList",{params:e})}var l=e.path;return{getDepartmentRequirementList:n,publishReq:a,updateReq:r,deleteReq:i,getReqDetail:o,getResponseList:s}}]),DepartmentReq.service("Department.Requirement.Service.Component",["$uibModal",function(t){function e(t,e){t.Alerts=[{type:e.type,message:e.message,timeout:1200}],t.CloseAlert=function(e){t.Alerts.splice(e,1)}}function n(e,n,a){e.Modal.type=n;var r=t.open({animation:!0,templateUrl:a+".html",scope:e});return e.Modal.confirm=function(t){t&&r.close(e.Modal)},e.Modal.cancel=function(){r.dismiss()},r}return{popAlert:e,popModal:n}}]);var DepartmentShare=angular.module("DepartmentShare",["ui.router"]);DepartmentShare.controller("DepartmentShare.Controller.Main",["$rootScope","$scope","$stateParams","DepartmentShare.Service.Http",function(t,e,n,a){function r(t){a.inventoryList(t).then(function(t){e.depShareList=t.data.body})}e.DepartmentShare={};var i={};i.limit=10,i.skip=0,r(i),a.countAll().then(function(t){200==t.data.head.status&&(e.DepartmentShare.countAll=t.data.body[0].NUMBER)}),a.countByShareLevel().then(function(t){e.shareLevelList=t.data.body}),a.countBySpatial().then(function(t){e.areaPeriodList=t.data.body}),e.shareLvShareSelection=[],e.getIvntListBySl=function(t){var n=e.shareLvShareSelection.indexOf(t.SYS_DICT_ID);n>-1?e.shareLvShareSelection=[]:e.shareLvShareSelection=t.SYS_DICT_ID,i.SHARE_LEVEL=e.shareLvShareSelection,i.limit=10,i.skip=0,r(i)},e.areaShareSelection=[],e.getIvntListByAP=function(t){var n=e.areaShareSelection.indexOf(t.SYS_DICT_ID);n>-1?e.areaShareSelection.splice(n,1):e.areaShareSelection.push(t.SYS_DICT_ID),console.log(e.areaShareSelection),i.AREA_DATA_LEVEL=e.areaShareSelection,i.limit=10,i.skip=0,r(i)},e.getShareLevelAll=function(){e.shareLvShareSelection=[],i.SHARE_LEVEL=null,i.limit=10,i.skip=0,r(i)},e.getSpatialAll=function(){e.areaShareSelection=[],i.AREA_DATA_LEVEL=null,i.limit=10,i.skip=0,r(i)}}]),DepartmentShare.factory("DepartmentShare.Service.Http",["$http","API",function(t,e){function n(e){return t.get(o+"/shareInventory/countAll",{params:e})}function a(e){return t.get(o+"/shareInventory/countByShareLevel",{params:e})}function r(e){return t.get(o+"/shareInventory/countBySpatial",{params:e})}function i(e){return t.get(o+"/shareInventory/inventoryList",{params:e})}var o=e.path;return{countAll:n,countByShareLevel:a,countBySpatial:r,inventoryList:i}}]);var SystemUser=angular.module("Department.SystemUser",["ui.router"]);SystemUser.controller("Department.SystemUser.Controller.Main",["$scope","$q","Department.SystemUser.Service.Http","Department.SystemUser.Service.Component","$uibModal",function(t,e,n,a,r){function i(){n.getUserList().then(function(e){t.users=e.data.body})}t.Modal={},t.deptList=[],n.getDepartmentList().then(function(e){t.deptList=e.data.body}),i(),t.addUserModal=function(){t.Modal={},t.sysUser={},a.popModal(t,"添加","add-user-modal").result.then(function(){n.saveUser(t.sysUser).then(function(t){200==t.data.head.status?(alert("添加成功"),i()):alert("添加失败")})})},t.updateUser=function(e){e.DEP_NAME=null,t.sysUser=e,a.popModal(t,"修改","add-user-modal").result.then(function(){n.updateUser(t.sysUser).then(function(t){200==t.data.head.status?(alert("修改成功"),i()):alert("修改失败")})})},t.deleteUser=function(t){console.log(t),n.deleteUser(t).then(function(t){console.log(t.data),200==t.data.head.status?(alert("删除成功"),i()):alert("删除失败！"),i()})}}]),SystemUser.factory("Department.SystemUser.Service.Http",["$http","$q","API",function(t,e,n){function a(){return t.get(l+"/user")}function r(e){return t.post(l+"/user",{data:e})}function i(){return t.get(l+"/dep/")}function o(e){return t.put(l+"/user/",{data:e})}function s(e){return t["delete"](l+"/user",{data:{ID:e.ID}})}var l=n.path;return{getUserList:a,saveUser:r,getDepartmentList:i,updateUser:o,deleteUser:s}}]),SystemUser.service("Department.SystemUser.Service.Component",["$uibModal",function(t){function e(t,e){t.Alerts=[{type:e.type,message:e.message,timeout:1200}],t.CloseAlert=function(e){t.Alerts.splice(e,1)}}function n(e,n,a){e.Modal.type=n;var r=t.open({animation:!0,templateUrl:a+".html",scope:e});return e.Modal.confirm=function(t){t&&r.close(e.Modal)},e.Modal.cancel=function(){r.dismiss()},r}return{popAlert:e,popModal:n}}]);var InventoryDetail=angular.module("InventoryDetail",["ui.router"]);InventoryDetail.controller("InventoryDetail.Controller.Main",["$rootScope","$scope","$stateParams","InventoryDetail.Service.Http",function(t,e,n,a){e.InventoryDetail={};var r={ID:n.inventoryID},i={dataId:n.inventoryID};a.getInventoryDetail(r).then(function(t){200==t.data.head.status&&(e.InventoryDetail.detail=t.data.body[0])}),a.indicatorList(i).then(function(t){200==t.data.head.status&&(e.InventoryDetail.indicators=t.data.body)}),a.examplesList(i).then(function(t){200==t.data.head.status&&(e.InventoryDetail.examples=t.data.body)})}]),InventoryDetail.factory("InventoryDetail.Service.Http",["$http","API",function(t,e){function n(e){return t.get(i+"/inventory/getInventoryDetail",{params:e})}function a(e){return t.get(i+"/indicator/indicatorList",{params:e})}function r(e){return t.get(i+"/examples/examplesList",{params:e})}var i=e.path;return{getInventoryDetail:n,indicatorList:a,examplesList:r}}]);var Inventory=angular.module("Inventory",["ui.router"]);Inventory.controller("Inventory.Controller.Main",["$scope","$state","Inventory.Service.Http",function(t,e,n){function a(e){n.getShareDictWithInventoryNum(e).then(function(e){200==e.data.head.status&&(t.Inventory.shareDict=e.data.body)}),n.getAreaDictWithInventoryNum(e).then(function(e){200==e.data.head.status&&(t.Inventory.areaDict=e.data.body)}),n.getShareDictWithInventoryNum(e).then(function(e){200==e.data.head.status&&(t.Inventory.shareDict=e.data.body)}),n.inventoryList(e).then(function(e){200==e.data.head.status&&(t.Inventory.inventoryList=e.data.body)})}t.Inventory={},n.getDepWithInventoryNum().then(function(e){200==e.data.head.status&&(t.Inventory.departments=e.data.body)}),a(),t.Inventory.switcher=function(t){var e={DEP_ID:t};a(e)}}]),Inventory.factory("Inventory.Service.Http",["$http","API",function(t,e){function n(e){return t.get(s+"/inventory/getDepWithInventoryNum")}function a(e){return t.get(s+"/inventory/getShareDictWithInventoryNum",{params:e})}function r(e){return t.get(s+"/inventory/getAreaDictWithInventoryNum",{params:e})}function i(e){return t.get(s+"/inventory/inventoryList",{params:e})}function o(e){return t.put(s+"/inventory/updateVisitCount",{data:data})}var s=e.path;return{getDepWithInventoryNum:n,getShareDictWithInventoryNum:a,getAreaDictWithInventoryNum:r,inventoryList:i,updateVisitCount:o}}]);var RequirementDetail=angular.module("RequirementDetail",["ui.router"]);RequirementDetail.controller("RequirementDetail.Controller.Main",["$rootScope","$scope","$stateParams","RequirementDetail.Service.Http",function(t,e,n,a){var r={ID:n.requirementID},i={REQUIREMENT_ID:n.requirementID};e.RequirementDetail={},a.requireDetail(r).then(function(t){200==t.data.head.status&&(e.RequirementDetail.detail=t.data.body[0])}),a.requireResponseList(i).then(function(t){200==t.data.head.status&&(e.RequirementDetail.list=t.data.body)}),e.RequirementDetail.pushResponse=function(){if(e.RequirementDetail.response){var t={REQUIREMENT_ID:n.requirementID,RESPONSE_CONTENT:e.RequirementDetail.response};a.addRequireResponse(t).then(function(t){200==t.data.head.status&&a.requireResponseList({REQUIREMENT_ID:n.requirementID}).then(function(t){200==t.data.head.status&&(e.RequirementDetail.list=t.data.body)})})}else alert("请输入回复内容！")}}]),RequirementDetail.factory("RequirementDetail.Service.Http",["$http","API",function(t,e){function n(e){return t.get(i+"/requirement/requireDetail",{params:e})}function a(e){return t.get(i+"/requirement/requireResponseList",{params:e})}function r(e){return t.post(i+"/requirement/addRequireResponse",{data:e})}var i=e.path;return{requireDetail:n,requireResponseList:a,addRequireResponse:r}}]);var RequirementMain=angular.module("RequirementMain",["ui.router"]);RequirementMain.controller("RequirementMain.Controller.Main",["$scope","$stateParams","RequirementMain.Service.Http",function(t,e,n){var a={};t.Requirement={},n.getStatistic(a).then(function(e){200==e.data.head.status&&(t.Requirement.statistic=e.data.body[0])}),n.getRequirementList(a).then(function(e){200==e.data.head.status&&(t.Requirement.list=e.data.body)})}]),RequirementMain.factory("RequirementMain.Service.Http",["$http","API",function(t,e){function n(e){return t.get(r+"/requirement/statistic",{params:e})}function a(e){return t.get(r+"/requirement/requirementList",{params:e})}var r=e.path;return{getStatistic:n,getRequirementList:a}}]);
//# sourceMappingURL=bundle.min.js.map
