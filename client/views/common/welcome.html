<div id='main'>
  <nav class='navbar navbar-default navbar-patch'>
    <div class='container'>
      <a class='logo pull-left'></a>
      <!--login button-->
      <div class="btn-group pull-right btn-login">
        <a class="btn btn-default" ui-sref="login">
          <i class="far far-user"></i>登录</a>
      </div>
    </div>
  </nav>

  <div id='data-quota-main' class="container">
    <div class="row" wiserv-main-wrapper="" >
      <div class="left col-md-1 buttonType">
        <div class="btn-group btn-group-md">
          <button type="button" class="btn btn-primary active toggler" ng-click="typeListOpen()">机<br>构<br>类<br>型</button>
          <button type="button" class="btn btn-success active toggler" ng-click="ocupationListOpen()">机<br>构<br>职<br>能</button>
          <button type="button" class="btn btn-warning active toggler" ng-click="areaListOpen()">区<br>域</button>
          <button type="button" class="btn btn-danger  active toggler" ng-click="themeListOpen()">主<br>题<br>类</button>
        </div>
      </div>
      <div class="left col-md-2 sidebar1">
        <div class="panel panel-default">
          <div class='panel-heading' ui-sref="main.data-quota.list" ui-sref-opts="{reload:true}">
                <i class="fa fa-refresh">{{filterName}}</i>
          </div>

          <div class='input-group input-group-sm searchname'>
            <input ng-model="predicate" type='text' placeholder='请输入部门短名称...' class='form-control'>
            <span class='input-group-addon'>
              <span class='glyphicon glyphicon-search'></span>
            </span>
          </div>

          <div ng-if="flag===1" class='menu' ui-tree data-drag-enabled="false">
            <treecontrol class="tree-classic"
            tree-model="list"
            filter-expression="predicate"
            filter-comparator="comparator"
            options="treeOptions"
            on-selection="showSelected(node)"
            selected-node="node1">
            <span ui-sref="main.data-quota.list({resource_dep_id: node.id, dep_name: node.dep_name})">{{node.dep_short_name}}</span>
            </treecontrol>
          </div>
          <div ng-if="flag===2" class='menu' ui-tree data-drag-enabled="false">
            <treecontrol class="tree-classic"
            tree-model="OcupationList"
            filter-expression="predicate"
            filter-comparator="comparator"
            options="treeOptions"
            on-selection="showSelected(node)"
            selected-node="node1">
            <span ui-sref="main.data-quota.list({resource_dep_id: node.id, dep_name: node.dep_name})">{{node.dep_short_name}}</span>
            </treecontrol>
          </div>
          <div ng-if="flag===3" class='menu' ui-tree data-drag-enabled="false">
            <treecontrol class="tree-classic"
            tree-model="areaList"
            filter-expression="predicate"
            filter-comparator="comparator"
            options="treeOptions"
            on-selection="showSelected(node)"
            selected-node="node1">
            <span ui-sref="main.data-quota.list({resource_dep_id: node.id, dep_name: node.dep_name})">{{node.dep_short_name}}</span>
            </treecontrol>
          </div>
          <div ng-if="flag===4" class='menu' ui-tree data-drag-enabled="false">
            <treecontrol class="tree-classic"
            tree-model="themeList"
            filter-expression="predicate"
            filter-comparator="comparator"
            options="treeOptions"
            on-selection="showSelected(node)"
            selected-node="node1">
            <span ui-sref="main.data-quota.list({resource_dep_id: node.id, dep_name: node.dep_name})">{{node.dep_short_name}}</span>
            </treecontrol>
          </div>
        </div>
      </div>
      <div class="right col-md-9 content">
        <div id='data-quota-list'>
          <div class="panel panel-default pannel-patch">
            <div class="panel-heading">
              <i ng-if="currentDep===''" class="fa fa-paperclip"> 条件过滤</i>
              <i ng-if="currentDep!==''" class="fa fa-paperclip"> {{currentDep}}</i>
              <div class="input-group col-xs-3 pull-right input-patch">
                <input ng-model='TargetDataQuotaName' type="text" class="form-control" placeholder="请输入查询指标名称...">
                <span class="input-group-btn">
                  <button ng-click='Retrieval()' class="btn btn-default" type="button">查询</button>
                </span>
              </div>

            </div>
            <div class="panel-body">
            <div class='filter'>
              <!-- 信息资源格式 -->
              <div class='indicator-filter'>
                <nav class='pull-left'>
                  <ul class="pager">
                    <li class="text-muted filter-label">信息资源格式</li>
                    <li ng-click="resourceFormatFilter('ALL')">
                      <a ng-class='resourceFormatActiveAll'>全部</a>
                    </li>
                    <li ng-repeat='resourceFormat in resourceFormats' ng-click='resourceFormatFilter(resourceFormat.id, $index)'>
                      <a ng-class='resourceFormatActive[$index]'>{{resourceFormat.dict_name}}</a>
                    </li>
                  </ul>
              </nav>
              </div>

              <!-- 更新周期 -->
              <div class='indicator-filter'>
                <nav class='pull-left'>
                  <ul class="pager">
                    <li class="text-muted filter-label">更新周期</li>
                    <li ng-click="ShareFrequencyFilter('ALL')">
                      <a ng-class='ShareFrequencyActiveAll'>全部</a>
                    </li>
                    <li ng-repeat='shareFrequency in ShareFrequencys' ng-click='ShareFrequencyFilter(shareFrequency.id, $index)'>
                      <a ng-class='ShareFrequencyActive[$index]'>{{shareFrequency.dict_name}}
                      </a>
                    </li>
                  </ul>
              </nav>
              </div>

              <!-- 是否涉密 -->
             <div class='indicator-filter'>
               <nav class='pull-left'>
                 <ul class="pager issecret">
                   <li class="text-muted filter-label ">是否涉密</li>
                   <li ng-click="isScretFilter('ALL')">
                      <a ng-class='isScretActiveAll' >全部</a>
                   </li>
                   <li ng-repeat='isScret in isScrets' ng-click='isScretFilter(isScret.id, $index)'>
                      <a ng-class='isScretActive[$index]'>{{isScret.dict_name}}</a>
                   </li>
                </ul>
               </nav>
             </div>

              <!-- 共享级别 -->
              <div class='indicator-filter'>
                <nav class='pull-left'>
                  <ul class="pager">
                    <li class="text-muted filter-label">共享级别</li>
                    <li ng-click="ShareLevelFilter('ALL')">
                      <a ng-class='ShareLevelActiveAll'>全部</a>
                    </li>
                    <li ng-repeat='shareLevel in ShareLevels' ng-click='ShareLevelFilter(shareLevel.id, $index)'>
                      <a ng-class='ShareLevelActive[$index]'>{{shareLevel.dict_name}}</a>
                    </li>
                  </ul>
              </nav>
              </div>

           </div>
          </div>
         </div>

          <div class="panel panel-default">
            <div class="panel-heading">
              <i class="fa fa-table"> 资源列表</i>
              <span class='pull-right text-info'>共{{DataQuotasTotal}}条</span>
            </div>
            <div class="panel-body"></div>
            <div class="table-responsive">
              <div class='container'>
                <div class='row'>
                  <div class='col-lg-12' >
                    <table class='table table-hover table-striped table-bordered table-patch'>
                       <thead class='text-center'>
                         <tr>
                           <th width="40px" rowspan="2">序号</th>
                           <th width="90px" rowspan="2">信息资源名称</th>
                           <th width="60px" rowspan="2">信息资源分类</th>
                           <th width="60px" rowspan="2">信息资源格式</th>
                           <th width="60px" rowspan="2">更新周期</th>
                           <th width="60px" rowspan="2">是否涉密</th>
                           <th width="60px" rowspan="2">共享级别</th>
                           <th width="60px" rowspan="2">共享条件</th>
                           <th width="60px" rowspan="2">共享方式</th>
                         </tr>
                       </thead>
                       <tbody>
                         <tr ng-repeat='quota in DataQuotas'>
                          <td class='numberAndDateStyle'>{{::$index+(Paging.currentPage-1)*10+1}}</td>
                          <td title='{{quota.resource_name}}'>{{quota.resource_name}}</td>
                          <td title='{{quota.category_name}}'>{{quota.category_name}}</td>
                          <td title='{{quota.resource_format_name}}'>{{quota.resource_format_name}}</td>
                          <td title='{{quota.update_period}}'>{{quota.update_period}}</td>
                          <td title='{{quota.secret_flag_name}}'>{{quota.secret_flag_name}}</td>
                          <td title='{{quota.share_level_name}}'>{{quota.share_level_name}}</td>
                          <td title="{{quota.share_limit}}">{{quota.share_limit}}</td>
                          <td title='{{quota.share_method_name}}'>{{quota.share_method_name}}</td>

                         </tr>
                       </tbody>
                     </table>
                  </div>
                </div>
              </div>
            </div>

            <uib-pagination class='pull-right' total-items='Paging.totalItems' ng-model='Paging.currentPage' ng-change='Paging.pageChanged()' items-per-page='Paging.itemsPerPage'  next-text='下一页' previous-text='上一页'></uib-pagination>

          </div>

        </div>

      </div>
    </div>
  </div>

</div>
